
# ğŸ›’ E-Commerce Data Warehouse using dbt + DuckDB + Mage

Welcome to the **E-Commerce Data Warehousing** project! This end-to-end pipeline showcases how to model, transform, and analyze raw transactional data using modern data tooling â€” all built from a single CSV file input.

---

## ğŸš€ Tech Stack

| Tool         | Purpose                                      |
|--------------|----------------------------------------------|
| **CSV File** | Raw source data                              |
| **dbt**      | SQL-based data transformation                |
| **DuckDB**   | Lightweight OLAP DB for analytics            |
| **Mage**     | Workflow orchestration and scheduling        |

---

## ğŸ§± Project Structure

```

â”œâ”€â”€ dbt\_duckdb\_dwh/
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ marts/
â”‚   â”‚   â”œâ”€â”€ staging/
â”‚   â”‚   â””â”€â”€ sources/
â”‚   â””â”€â”€ macros/
â”œâ”€â”€ mage/
â”‚   â””â”€â”€ pipelines/
â”‚       â””â”€â”€ refresh\_dbt\_pipeline/
â””â”€â”€ sales.csv

````

---

## ğŸ–¼ï¸ Reference Screenshots

### ğŸ“‚ dbt Project Documentation UI

Auto-generated by dbt docs to explore models, descriptions, and column metadata:

![dbt Documentation UI](./image.png)

---

### ğŸ” Source Model (`incremental_src_sales`)

The starting point for ingesting sales data as an **incremental model**:

![Incremental Model](./image%202.png)

---

### ğŸ§ª Transformed Table Output Preview

Sample transformed data from the final fact/mart tables loaded into DuckDB:

![Sample Transformed Table](./image%203.png)

---

### ğŸ§© Mage Pipeline Flow

Orchestrated through Mage to first **refresh source CSV data** and then **run dbt transformations**:

![Mage Orchestration](./image%204.png)

---

### ğŸ§­ Overall Architecture

High-level architecture showing how Mage, dbt, and DuckDB work together:

![Architecture Diagram](./Snow_dbt_DWH.jpg)

---

## ğŸ§¾ Dataset Summary

Source: `sales.csv`  
Contains synthetic e-commerce transactions with columns like:

- `transaction_id`, `transactional_date`
- `product_id`, `customer_id`
- `cost`, `price`, `quantity`, `payment`, etc.

These are cleaned, transformed, and modeled across staging and mart layers using dbt.

---

## ğŸ§  Use Cases

This pipeline supports:

- ğŸ“ˆ Business Intelligence & Dashboards  
- ğŸ“Š Reporting for customer/product/payment trends  
- ğŸ“‰ Profitability analysis & margin tracking  
- ğŸ¤– Feeding cleaned data into ML models

---

## â–¶ï¸ Running the Project

1. Clone the repository
2. Place `sales.csv` in the path expected by the `src_sales` model
3. Run the dbt transformations via Mage pipeline or CLI:

```bash
dbt run
````

OR use Mage pipeline blocks:

* `run_refresh_sources.py`
* `dbt_run_block.py`

---

## ğŸ¤ Acknowledgements

This project is powered by:

* [dbt](https://www.getdbt.com/)
* [DuckDB](https://duckdb.org/)
* [Mage](https://www.mage.ai/)

Built with â¤ï¸ by Divin.

```

---

Let me know if you'd also like to:
- Add hyperlinks to individual dbt models/marts
- Link the markdown case study file (`Case Study E - Commerce...md`)
- Add CLI install/run instructions for Mage, DuckDB, or dbt

