
# 🛒 E-Commerce Data Warehouse using dbt + DuckDB + Mage

Welcome to the **E-Commerce Data Warehousing** project! This end-to-end pipeline showcases how to model, transform, and analyze raw transactional data using modern data tooling — all built from a single CSV file input.

---

## 🚀 Tech Stack

| Tool         | Purpose                                      |
|--------------|----------------------------------------------|
| **CSV File** | Raw source data                              |
| **dbt**      | SQL-based data transformation                |
| **DuckDB**   | Lightweight OLAP DB for analytics            |
| **Mage**     | Workflow orchestration and scheduling        |

---

## 🧱 Project Structure

```

├── dbt\_duckdb\_dwh/
│   ├── models/
│   │   ├── marts/
│   │   ├── staging/
│   │   └── sources/
│   └── macros/
├── mage/
│   └── pipelines/
│       └── refresh\_dbt\_pipeline/
└── sales.csv

````

---

## 🖼️ Reference Screenshots

### 📂 dbt Project Documentation UI

Auto-generated by dbt docs to explore models, descriptions, and column metadata:

![dbt Documentation UI](./image.png)

---

### 🔍 Source Model (`incremental_src_sales`)

The starting point for ingesting sales data as an **incremental model**:

![Incremental Model](./image%202.png)

---

### 🧪 Transformed Table Output Preview

Sample transformed data from the final fact/mart tables loaded into DuckDB:

![Sample Transformed Table](./image%203.png)

---

### 🧩 Mage Pipeline Flow

Orchestrated through Mage to first **refresh source CSV data** and then **run dbt transformations**:

![Mage Orchestration](./image%204.png)

---

### 🧭 Overall Architecture

High-level architecture showing how Mage, dbt, and DuckDB work together:

![Architecture Diagram](./Snow_dbt_DWH.jpg)

---

## 🧾 Dataset Summary

Source: `sales.csv`  
Contains synthetic e-commerce transactions with columns like:

- `transaction_id`, `transactional_date`
- `product_id`, `customer_id`
- `cost`, `price`, `quantity`, `payment`, etc.

These are cleaned, transformed, and modeled across staging and mart layers using dbt.

---

## 🧠 Use Cases

This pipeline supports:

- 📈 Business Intelligence & Dashboards  
- 📊 Reporting for customer/product/payment trends  
- 📉 Profitability analysis & margin tracking  
- 🤖 Feeding cleaned data into ML models

---

## ▶️ Running the Project

1. Clone the repository
2. Place `sales.csv` in the path expected by the `src_sales` model
3. Run the dbt transformations via Mage pipeline or CLI:

```bash
dbt run
````

OR use Mage pipeline blocks:

* `run_refresh_sources.py`
* `dbt_run_block.py`

---

## 🤝 Acknowledgements

This project is powered by:

* [dbt](https://www.getdbt.com/)
* [DuckDB](https://duckdb.org/)
* [Mage](https://www.mage.ai/)

Built with ❤️ by Divin.

```

---

Let me know if you'd also like to:
- Add hyperlinks to individual dbt models/marts
- Link the markdown case study file (`Case Study E - Commerce...md`)
- Add CLI install/run instructions for Mage, DuckDB, or dbt

